#!/bin/sh

echo "ðŸ”§ pre-commit hook triggered" >&2

# Run lint-staged
echo "ðŸ“ Running linting..." >&2
npx lint-staged
LINT_RESULT=$?

if [ $LINT_RESULT -ne 0 ]; then
  echo "âŒ Linting failed. Please fix the issues and try again." >&2
  exit 1
fi

# Run tests
echo "ðŸ§ª Running tests..." >&2
npm run test-build
TEST_RESULT=$?

if [ $TEST_RESULT -ne 0 ]; then
  echo "âŒ Tests failed. Please fix the issues and try again." >&2
  exit 1
fi

echo "âœ… Pre-commit checks passed" >&2
exit 0